<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Simulador Condensador</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, rgb(13, 55, 69), rgb(132, 52, 28), rgb(224, 127, 63));
      padding: 20px;
      min-height: 100vh;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      background: white;
      border-radius: 20px;
      padding: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }

    h1 {
      text-align: center;
      color: rgb(13, 55, 69);
      margin-bottom: 20px;
    }

    .controls {
      display: grid;
      gap: 20px;
      margin: 20px 0;
      padding: 15px;
      background: rgba(224, 127, 63, 0.1);
      border-radius: 10px;
    }

    .control-group {
      text-align: center;
    }

    label {
      display: block;
      font-weight: bold;
      margin-bottom: 10px;
      color: rgb(13, 55, 69);
    }

    input[type="range"] {
      width: 100%;
      margin: 10px 0;
    }

    input[type="number"] {
      width: 100px;
      padding: 8px;
      border: 2px solid rgb(224, 127, 63);
      border-radius: 5px;
      text-align: center;
      font-weight: bold;
    }

    .value {
      font-size: 1.2em;
      color: rgb(224, 127, 63);
      font-weight: bold;
      margin-top: 5px;
    }

    .buttons {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 10px;
      margin: 20px 0;
    }

    button {
      padding: 12px;
      border: none;
      border-radius: 25px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
    }

    .btn-orange {
      background: linear-gradient(135deg, rgb(224, 127, 63), rgb(132, 52, 28));
      color: white;
    }

    .btn-green {
      background: linear-gradient(135deg, #4caf50, #2e7d32);
      color: white;
    }

    .btn-red {
      background: linear-gradient(135deg, #f44336, #c62828);
      color: white;
    }

    .btn-blue {
      background: linear-gradient(135deg, rgb(13, 55, 69), rgb(132, 52, 28));
      color: white;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    }

    .simulator {
      background: rgba(224, 127, 63, 0.1);
      border-radius: 15px;
      padding: 20px;
      margin: 20px 0;
      text-align: center;
    }

    .ruler {
      position: relative;
      height: 80px;
      background: linear-gradient(to bottom, #f0f0f0, #e0e0e0);
      border: 2px solid rgb(132, 52, 28);
      border-radius: 8px;
      margin: 30px auto;
      max-width: 400px;
    }

    .plate {
      position: absolute;
      width: 12px;
      height: 100px;
      background: linear-gradient(to right, rgb(13, 55, 69), rgb(132, 52, 28));
      border: 2px solid rgb(132, 52, 28);
      border-radius: 4px;
      top: -10px;
      transition: all 0.3s;
    }

    .plate-left {
      left: 5%;
    }

    .plate-right {
      right: 5%;
    }

    .result {
      font-size: 1.3em;
      font-weight: bold;
      color: rgb(13, 55, 69);
      margin: 20px 0;
      padding: 15px;
      background: rgba(224, 127, 63, 0.1);
      border-radius: 10px;
    }

    .result span {
      color: rgb(224, 127, 63);
      font-size: 1.5em;
    }

    .chart-box {
      height: 300px;
      margin: 20px 0;
      padding: 15px;
      background: white;
      border-radius: 10px;
      display: none;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
      display: none;
    }

    th, td {
      border: 1px solid rgba(224, 127, 63, 0.3);
      padding: 10px;
      text-align: center;
    }

    th {
      background: linear-gradient(135deg, rgb(13, 55, 69), rgb(132, 52, 28));
      color: white;
    }

    tr:nth-child(even) {
      background: rgba(224, 127, 63, 0.05);
    }

    .hidden {
      display: none;
    }

    .section {
      display: block;
    }

    .info-box {
      background: rgba(224, 127, 63, 0.1);
      border-left: 4px solid rgb(224, 127, 63);
      padding: 15px;
      margin: 15px 0;
      border-radius: 8px;
    }

    h2 {
      color: rgb(13, 55, 69);
      margin: 20px 0 15px 0;
      padding-bottom: 10px;
      border-bottom: 3px solid rgb(224, 127, 63);
    }

    h3 {
      color: rgb(132, 52, 28);
      margin: 15px 0 10px 0;
    }

    @media (min-width: 600px) {
      .controls {
        grid-template-columns: repeat(2, 1fr);
      }
    }
  </style>
</head>
<body>
  <div class="container section" id="simulador">
    <h1>‚ö° Simulador de Condensador</h1>

    <div class="controls">
      <div class="control-group">
        <label>‚ö° Voltaje (V)</label>
        <input type="range" id="voltSlider" min="10" max="1000" value="100" step="10">
        <input type="number" id="voltNum" min="10" max="1000" value="100" step="10">
        <div class="value" id="voltVal">100 V</div>
      </div>
      <div class="control-group">
        <label>üìè Distancia (mm)</label>
        <input type="range" id="distSlider" min="5" max="100" value="64.5" step="0.5">
        <input type="number" id="distNum" min="5" max="100" value="64.5" step="0.5">
        <div class="value" id="distVal">64.5 mm</div>
      </div>
    </div>

    <div class="buttons">
      <button class="btn-orange" onclick="capturar()">üìä Capturar</button>
      <button class="btn-green" onclick="graficar()">üìà Gr√°fica</button>
      <button class="btn-red" onclick="limpiar()">üóëÔ∏è Limpiar</button>
      <button class="btn-blue" onclick="verExperimento()">üî¨ Experimento</button>
    </div>

    <div class="simulator">
      <h3>üî¨ Visualizaci√≥n</h3>
      <div class="ruler">
        <div class="plate plate-left"></div>
        <div class="plate plate-right" id="placa"></div>
      </div>
      <div class="result">
        Campo El√©ctrico: <span id="campo">0.00 V/m</span>
      </div>
    </div>

    <div class="chart-box" id="grafica">
      <canvas id="chart"></canvas>
    </div>

    <table id="tabla">
      <thead>
        <tr>
          <th>#</th>
          <th>Voltaje (V)</th>
          <th>Distancia (mm)</th>
          <th>Campo E (V/m)</th>
        </tr>
      </thead>
      <tbody id="tbody"></tbody>
    </table>
  </div>

  <div class="container section hidden" id="experimento">
    <h1>‚ö° Experimento: Condensador de Placas</h1>
    
    <div class="buttons">
      <button class="btn-blue" onclick="volverSimulador()">‚óÄÔ∏è Volver</button>
    </div>

    <h2>üìä Datos Experimentales</h2>
    
    <h3>Campo El√©ctrico vs Voltaje (d = 6 mm)</h3>
    <div class="info-box">
      <strong>Configuraci√≥n:</strong> Distancia fija en 6 mm, variando el voltaje.
    </div>
    
    <table style="display: table;">
      <thead>
        <tr>
          <th>V (kV)</th>
          <th>E Exp (kV/m)</th>
          <th>E Te√≥ (kV/m)</th>
          <th>Error %</th>
        </tr>
      </thead>
      <tbody id="tablaV"></tbody>
    </table>

    <div class="chart-box" style="display: block; height: 300px;">
      <canvas id="chartV"></canvas>
    </div>

    <h3>Campo El√©ctrico vs Distancia (V = 1 kV)</h3>
    <div class="info-box">
      <strong>Configuraci√≥n:</strong> Voltaje fijo en 1 kV, variando la distancia.
    </div>
    
    <table style="display: table;">
      <thead>
        <tr>
          <th>d (m)</th>
          <th>E Exp (kV/m)</th>
          <th>E Te√≥ (kV/m)</th>
          <th>Error %</th>
        </tr>
      </thead>
      <tbody id="tablaD"></tbody>
    </table>

    <div class="chart-box" style="display: block; height: 300px;">
      <canvas id="chartD"></canvas>
    </div>

    <h2>üîã Capacitancia y Carga</h2>
    <div class="info-box">
      <strong>√Årea:</strong> 0.01 m¬≤ (10 cm √ó 10 cm)<br>
      <strong>Capacitancia te√≥rica:</strong> C ‚âà 14.8 pF<br>
      <strong>Densidad de carga:</strong> œÉ ‚âà 1.32√ó10‚Åª‚Å∂ C/m¬≤<br>
      <strong>Carga total:</strong> Q ‚âà 13.2 nC
    </div>
  </div>

  <script>
    let datos = [];
    let miChart = null;
    let chartV = null;
    let chartD = null;

    const voltSlider = document.getElementById('voltSlider');
    const voltNum = document.getElementById('voltNum');
    const voltVal = document.getElementById('voltVal');
    const distSlider = document.getElementById('distSlider');
    const distNum = document.getElementById('distNum');
    const distVal = document.getElementById('distVal');
    const campo = document.getElementById('campo');
    const placa = document.getElementById('placa');

    function actualizar() {
      const V = parseFloat(voltNum.value);
      const d = parseFloat(distNum.value);
      const E = V / (d / 1000);

      campo.textContent = E.toFixed(2) + ' V/m';
      voltVal.textContent = V + ' V';
      distVal.textContent = d + ' mm';

      const pos = 5 + ((d / 100) * 90);
      placa.style.right = (100 - pos) + '%';
    }

    voltSlider.oninput = function() {
      voltNum.value = this.value;
      actualizar();
    };

    voltNum.oninput = function() {
      voltSlider.value = this.value;
      actualizar();
    };

    distSlider.oninput = function() {
      distNum.value = this.value;
      actualizar();
    };

    distNum.oninput = function() {
      distSlider.value = this.value;
      actualizar();
    };

    function capturar() {
      const V = parseFloat(voltNum.value);
      const d = parseFloat(distNum.value);
      const E = V / (d / 1000);

      datos.push({ V: V, d: d, E: E });

      const tbody = document.getElementById('tbody');
      const tr = document.createElement('tr');
      tr.innerHTML = '<td>' + datos.length + '</td><td>' + V + '</td><td>' + d + '</td><td>' + E.toFixed(2) + '</td>';
      tbody.appendChild(tr);

      document.getElementById('tabla').style.display = 'table';
      alert('‚úÖ Dato capturado');
    }

    function graficar() {
      if (datos.length === 0) {
        alert('‚ö†Ô∏è No hay datos para graficar');
        return;
      }

      document.getElementById('grafica').style.display = 'block';

      if (miChart) miChart.destroy();

      const ctx = document.getElementById('chart').getContext('2d');
      miChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: datos.map((_, i) => 'Punto ' + (i + 1)),
          datasets: [{
            label: 'Campo E (V/m)',
            data: datos.map(d => d.E),
            borderColor: 'rgb(224, 127, 63)',
            backgroundColor: 'rgba(224, 127, 63, 0.1)',
            borderWidth: 3,
            tension: 0.3,
            fill: true
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false
        }
      });
    }

    function limpiar() {
      if (datos.length === 0) return;
      if (confirm('¬øBorrar todos los datos?')) {
        datos = [];
        document.getElementById('tbody').innerHTML = '';
        document.getElementById('tabla').style.display = 'none';
        document.getElementById('grafica').style.display = 'none';
        if (miChart) miChart.destroy();
        alert('‚úÖ Datos borrados');
      }
    }

    function verExperimento() {
      document.getElementById('simulador').classList.add('hidden');
      document.getElementById('experimento').classList.remove('hidden');
      cargarExperimento();
    }

    function volverSimulador() {
      document.getElementById('experimento').classList.add('hidden');
      document.getElementById('simulador').classList.remove('hidden');
    }

    function cargarExperimento() {
      const datosV = [
        { V: 0.1, E_exp: 19.6, E_teo: 16.67, error: 17.6 },
        { V: 0.2, E_exp: 33.6, E_teo: 33.33, error: 0.8 },
        { V: 0.3, E_exp: 40.5, E_teo: 50.00, error: -19.0 },
        { V: 0.4, E_exp: 64.5, E_teo: 66.67, error: -3.3 },
        { V: 0.5, E_exp: 80.7, E_teo: 83.33, error: -3.2 },
        { V: 0.6, E_exp: 93.3, E_teo: 100.00, error: -6.7 },
        { V: 0.7, E_exp: 102.4, E_teo: 116.67, error: -12.2 },
        { V: 0.8, E_exp: 120.4, E_teo: 133.33, error: -9.7 },
        { V: 0.9, E_exp: 135.0, E_teo: 150.00, error: -10.0 },
        { V: 1.0, E_exp: 149.6, E_teo: 166.67, error: -10.2 }
      ];

      const datosD = [
        { d: 0.006, E_exp: 102.4, E_teo: 166.67, error: -38.60 },
        { d: 0.011, E_exp: 76.6, E_teo: 90.91, error: -15.70 },
        { d: 0.016, E_exp: 54.8, E_teo: 62.50, error: -12.30 },
        { d: 0.021, E_exp: 40.1, E_teo: 47.62, error: -15.80 },
        { d: 0.026, E_exp: 29.7, E_teo: 38.46, error: -22.80 },
        { d: 0.031, E_exp: 26.6, E_teo: 32.26, error: -17.40 },
        { d: 0.036, E_exp: 20.8, E_teo: 27.78, error: -25.10 }
      ];

      // Llenar tabla V
      const tablaV = document.getElementById('tablaV');
      tablaV.innerHTML = '';
      datosV.forEach(row => {
        const tr = document.createElement('tr');
        tr.innerHTML = '<td>' + row.V + '</td><td>' + row.E_exp + '</td><td>' + row.E_teo + '</td><td>' + row.error.toFixed(1) + '</td>';
        tablaV.appendChild(tr);
      });

      // Llenar tabla D
      const tablaD = document.getElementById('tablaD');
      tablaD.innerHTML = '';
      datosD.forEach(row => {
        const tr = document.createElement('tr');
        tr.innerHTML = '<td>' + row.d + '</td><td>' + row.E_exp + '</td><td>' + row.E_teo + '</td><td>' + row.error.toFixed(1) + '</td>';
        tablaD.appendChild(tr);
      });

      // Gr√°fico E vs V
      if (chartV) chartV.destroy();
      const ctxV = document.getElementById('chartV').getContext('2d');
      chartV = new Chart(ctxV, {
        type: 'line',
        data: {
          labels: datosV.map(r => r.V),
          datasets: [
            {
              label: 'E Experimental',
              data: datosV.map(r => r.E_exp),
              borderColor: 'rgb(224, 127, 63)',
              backgroundColor: 'rgba(224, 127, 63, 0.1)',
              borderWidth: 3,
              tension: 0.3,
              fill: true
            },
            {
              label: 'E Te√≥rico',
              data: datosV.map(r => r.E_teo),
              borderColor: 'rgb(13, 55, 69)',
              borderWidth: 3,
              borderDash: [5, 5],
              fill: false
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: { position: 'top' }
          }
        }
      });

      // Gr√°fico E vs D
      if (chartD) chartD.destroy();
      const ctxD = document.getElementById('chartD').getContext('2d');
      chartD = new Chart(ctxD, {
        type: 'line',
        data: {
          labels: datosD.map(r => r.d.toFixed(3)),
          datasets: [
            {
              label: 'E Experimental',
              data: datosD.map(r => r.E_exp),
              borderColor: 'rgb(224, 127, 63)',
              backgroundColor: 'rgba(224, 127, 63, 0.1)',
              borderWidth: 3,
              tension: 0.3,
              fill: true
            },
            {
              label: 'E Te√≥rico',
              data: datosD.map(r => r.E_teo),
              borderColor: 'rgb(13, 55, 69)',
              borderWidth: 3,
              borderDash: [5, 5],
              fill: false
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: { position: 'top' }
          }
        }
      });
    }

    actualizar();
  </script>
</body>
</html>